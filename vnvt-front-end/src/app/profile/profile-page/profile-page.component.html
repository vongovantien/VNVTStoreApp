<div class="profile">
  <h1>Profile</h1>
  <mat-tab-group class="profile__tabs">
    <mat-tab label="Profile Information">
      <form class="profile__form" (ngSubmit)="onSaveChanges()">
        <h6>General Information</h6>
        <div class="profile__picture">
          <img src="assets/images/avatar.png" alt="Profile Picture">
          <button type="button" mat-button (click)="onEditPicture()">Edit</button>
        </div>
        <div class="profile__details">
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>First Name</mat-label>
            <input matInput [(ngModel)]="user.firstName" name="firstName" placeholder="First Name">
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Last Name</mat-label>
            <input matInput [(ngModel)]="user.lastName" name="lastName" placeholder="Last Name">
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput [(ngModel)]="user.email" name="email" placeholder="Email">
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Phone Number (optional)</mat-label>
            <input matInput [(ngModel)]="user.phone" name="phone" placeholder="Phone Number">
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Address</mat-label>
            <input matInput [(ngModel)]="user.address" name="address" placeholder="Address">
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>City</mat-label>
            <input matInput [(ngModel)]="user.city" name="city" placeholder="City">
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Country</mat-label>
            <input matInput [(ngModel)]="user.country" name="country" placeholder="Country">
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Zipcode</mat-label>
            <input matInput [(ngModel)]="user.zipcode" name="zipcode" placeholder="Zipcode">
          </mat-form-field>
          <button mat-raised-button color="primary" class="profile__button" type="submit">Save changes</button>
        </div>
      </form>
    </mat-tab>
    <mat-tab label="Account Settings">
      <form class="profile__form" (ngSubmit)="onChangePassword()">
        <h6>Change Password</h6>
        <div class="profile__details">
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Current Password</mat-label>
            <input matInput [(ngModel)]="passwords.current" name="currentPassword" type="password"
              placeholder="Current Password" required>
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>New Password</mat-label>
            <input matInput [(ngModel)]="passwords.new" name="newPassword" type="password" placeholder="New Password"
              required>
          </mat-form-field>
          <mat-form-field class="profile__form-field" appearance="outline">
            <mat-label>Confirm New Password</mat-label>
            <input matInput [(ngModel)]="passwords.confirm" name="confirmPassword" type="password"
              placeholder="Confirm New Password" required>
          </mat-form-field>
          <button mat-raised-button color="primary" class="profile__button" type="submit">Change Password</button>
        </div>
      </form>
    </mat-tab>
    <mat-tab label="Order History">
      <div class="profile__order-history">
        <h6>Order History</h6>
        <table mat-table [dataSource]="orders" class="mat-elevation-z8">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> Order ID </th>
            <td mat-cell *matCellDef="let order"> {{ order.id }} </td>
          </ng-container>
          <ng-container matColumnDef="totalAmount">
            <th mat-header-cell *matHeaderCellDef> Total Amount </th>
            <td mat-cell *matCellDef="let order"> {{ order.totalAmount | currency }} </td>
          </ng-container>
          <ng-container matColumnDef="paymentMethod">
            <th mat-header-cell *matHeaderCellDef> Payment Method </th>
            <td mat-cell *matCellDef="let order"> {{ order.payment.paymentMethod }} </td>
          </ng-container>
          <ng-container matColumnDef="orderStatus">
            <th mat-header-cell *matHeaderCellDef> Order Status </th>
            <td mat-cell *matCellDef="let order"> {{ order.orderStatus }} </td>
          </ng-container>
          <ng-container matColumnDef="userId">
            <th mat-header-cell *matHeaderCellDef> User ID </th>
            <td mat-cell *matCellDef="let order"> {{ order.userId }} </td>
          </ng-container>
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let order">
              <button mat-button (click)="openOrderDetails(order)">View Details</button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <!-- <button mat-button color="primary" class="profile__load-more" (click)="loadOrders()">Load more</button> -->
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
